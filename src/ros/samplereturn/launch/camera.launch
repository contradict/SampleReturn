<?xml version="1.0"?>
<!-- vim: set fenc=utf-8 et sts=4 ft=xml : -->
<launch>
    <!-- IEEE1394 camera driver -->
    <!-- Navigation Nodelet Host process -->
    <node
        machine="navigate"
        pkg="nodelet"
        type="nodelet"
        name="navigation_camera_process"
        args="manager"
        output="log"
        >
    </node>
    <node
         machine="navigate"
         pkg="nodelet"
         type="nodelet"
         name="left"
         args="load camera1394/driver /navigation_camera_process"
         ns="/navigation_stereo">

        <param name="guid" type="string" value="00b09d0100a8563d"/>
        <param name="video_mode" value="640x480_mono8"/>
        <param name="frame_id" value="navigation_left_camera"/>
        <param name="frame_rate" value="30"/>
        <param name="bayer_pattern" value="rggb"/>
        <param name="camera_info_url"
               type="string"
               value="file://$(find samplereturn)/calibration/ffmv-left.yaml" />
        <remap from="camera" to="left" />
    </node>
    <node
         machine="navigate"
         pkg="nodelet"
         type="nodelet"
         name="right"
         args="load camera1394/driver /navigation_camera_process"
         ns="/navigation_stereo">

        <param name="guid" type="string" value="00b09d0100a8566e"/>
        <param name="video_mode" value="640x480_mono8"/>
        <param name="frame_id" value="navigation_left_camera"/>
        <param name="frame_rate" value="30"/>
        <param name="bayer_pattern" value="rggb"/>
        <param name="camera_info_url"
               type="string"
               value="file://$(find samplereturn)/calibration/ffmv-right.yaml" />
        <remap from="camera" to="right" />
    </node>

    <!-- Debayer -->
    <node
          machine="navigate"
          pkg="nodelet"
          type="nodelet"
          name="debayer"
          args="load image_proc/debayer /navigation_camera_process"
          ns="/navigation_stereo/left">
    </node>
    <node
          machine="navigate"
          pkg="nodelet"
          type="nodelet"
          name="debayer"
          args="load image_proc/debayer /navigation_camera_process"
          ns="/navigation_stereo/right">
    </node>

    <!-- Manipulator Nodelet Host process -->
    <node
        machine="search"
        pkg="nodelet"
        type="nodelet"
        name="manipulator_camera_process"
        args="manager"
        output="log"
        >
    </node>
    <node
         machine="search"
         pkg="nodelet"
         type="nodelet"
         name="left"
         args="load camera1394/driver /manipulator_camera_process"
         ns="/manipulator_stereo">

        <param name="guid" type="string" value="00b09d0100a85650"/>
        <param name="video_mode" value="640x480_mono8"/>
        <param name="frame_id" value="manipulator_left_camera"/>
        <param name="frame_rate" value="30"/>
        <param name="bayer_pattern" value="rggb"/>
        <param name="camera_info_url"
               type="string"
               value="file://$(find samplereturn)/calibration/ffmv-manipulator-cheap4mm-left.yaml" />
        <remap from="camera" to="left" />
    </node>
    <node
         machine="search"
         pkg="nodelet"
         type="nodelet"
         name="right"
         args="load camera1394/driver /manipulator_camera_process"
         ns="/manipulator_stereo">

        <param name="guid" type="string" value="00b09d0100a85642"/>
        <param name="video_mode" value="640x480_mono8"/>
        <param name="frame_id" value="manipulator_right_camera"/>
        <param name="frame_rate" value="30"/>
        <param name="bayer_pattern" value="rggb"/>
        <param name="camera_info_url"
               type="string"
               value="file://$(find samplereturn)/calibration/ffmv-manipulator-cheap4mm-right.yaml" />
        <remap from="camera" to="right" />
    </node>

 
    <!-- Debayer -->
    <node
          machine="search"
          pkg="nodelet"
          type="nodelet"
          name="debayer"
          args="load image_proc/debayer /manipulator_camera_process"
          ns="/manipulator_stereo/left">
          <remap from="image_mono" to="debayer/image_mono"/>
          <remap from="image_color" to="debayer/image_color"/>
    </node>
    <node
          machine="search"
          pkg="nodelet"
          type="nodelet"
          name="debayer"
          args="load image_proc/debayer /manipulator_camera_process"
          ns="/manipulator_stereo/right">
          <remap from="image_mono" to="debayer/image_mono"/>
          <remap from="image_color" to="debayer/image_color"/>
     </node>

    <!-- Rotate images 90 degrees -->
    <!--
    -->
    <node
        machine="search"
        pkg="nodelet"
        type="nodelet"
        name="image_rot90_mono"
        args="load image_rot90/ImageRot90 /manipulator_camera_process"
        ns="/manipulator_stereo/left">

        <remap from="rot90/image_raw_in" to="debayer/image_mono"/>
        <remap from="rot90/image_raw_rot" to="image_mono"/>
        <param name="rot" type="string" value="pi/2"/>
    </node>
    <node
        machine="search"
        pkg="nodelet"
        type="nodelet"
        name="image_rot90_mono"
        args="load image_rot90/ImageRot90 /manipulator_camera_process"
        ns="/manipulator_stereo/right">

        <remap from="rot90/image_raw_in" to="debayer/image_mono"/>
        <remap from="rot90/image_raw_rot" to="image_mono"/>
        <param name="rot" type="string" value="pi/2"/>
    </node>
    <node
        machine="search"
        pkg="nodelet"
        type="nodelet"
        name="image_rot90_color"
        args="load image_rot90/ImageRot90 /manipulator_camera_process"
        ns="/manipulator_stereo/left">

        <remap from="rot90/image_raw_in" to="debayer/image_color"/>
        <remap from="rot90/image_raw_rot" to="image_color"/>
        <param name="rot" type="string" value="pi/2"/>
    </node>
    <node
        machine="search"
        pkg="nodelet"
        type="nodelet"
        name="image_rot90_color"
        args="load image_rot90/ImageRot90 /manipulator_camera_process"
        ns="/manipulator_stereo/right">

        <remap from="rot90/image_raw_in" to="debayer/image_color"/>
        <remap from="rot90/image_raw_rot" to="image_color"/>
        <param name="rot" type="string" value="pi/2"/>
    </node>




    <!-- DSLR Camera Service Server --> 
    <node machine="search" pkg="photo" type="photo_node" name="photo_node"/>
</launch>
